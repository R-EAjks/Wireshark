commit b442b8d9d1
Author: Gerald Combs <gerald@wireshark.org>
Date:   Thu Jan 28 13:32:36 2021 -0800

    Prep for 3.4.3.

commit 57e14a4190
Author: Gerald Combs <gerald@wireshark.org>
Date:   Mon Jan 25 21:41:38 2021 +0000

    USB HID: Avoid allocating a huge amount of memory (second try).
    
    10204490d7 / MR 80 ensured that we didn't grow field.usages due to an
    underflow, but it neglected to check for a sane array size. Add another
    check to make sure we don't wmem_array_grow() too much. Fixes #17165 and
    fixes #16809 more completely.
    
    
    (cherry picked from commit 785e291c1be04beebae3f3603752f5737dc1694d)

commit 247f8a4b33
Author: John Thacker <johnthacker@gmail.com>
Date:   Thu Dec 3 04:00:09 2020 +0000

    USB HID: Usage Minimum and Usage Maximum are inclusive
    
    Usage Minimum and Usage Maximum are an inclusive, closed interval.
    This fixes an fencepost error where the Usage Maximum value was
    not being included as a possible value in the bitfield. Related
    to #17014
    
    
    (cherry picked from commit 5ca608f51932302e16c9d1218425804aac5f7ef4)

commit 935de5c4eb
Author: Jaap Keuter <jaap.keuter@xs4all.nl>
Date:   Thu Jan 28 11:16:51 2021 +0000

    ZVT: clean up some data points
    
    
    (cherry picked from commit b4f74bac74220e402c64175c65a222b7aabcb1dc)

commit 1b22b8ed51
Author: Guy Harris <gharris@sonic.net>
Date:   Thu Jan 28 07:56:22 2021 +0000

    epan: don't print nanoseconds if seconds isn't representable.
    
    Fix for previous fixes to #17179.
    
    
    (cherry picked from commit 4715f5021cb44fcf672b9f8d23efa8e4601a8d1f)

commit 9bcc1785c1
Author: Guy Harris <gharris@sonic.net>
Date:   Thu Jan 28 06:15:31 2021 +0000

    epan: don't use gmtime_s().
    
    It has the "feature" that, if handed a negative value, it might just
    exit.  gmtime() doesn't have that "feature", and is sufficiently
    thread-safe for our purposes; use it instead, and check to make sure it
    doesn't return a null pointer.
    
    The previous fix for #17179 still used gmtime_s(); this doesn't, so it's
    a better fix for #17179.
    
    
    (cherry picked from commit bf265d7e7aa8c69841291a20ab9c9f5ac189135b)

commit e072a71256
Author: Guy Harris <gharris@sonic.net>
Date:   Thu Jan 28 05:46:11 2021 +0000

    epan: don't assume gmtime_s() or gmtime_r() succeed.
    
    At least on Windows, gmtime_s() will *not* succeed if passed a negative
    value.
    
    Fixes #17179.
    
    
    (cherry picked from commit 4e4a7c11c744cf0d9ad83a575f9a3bcc60aa35c5)

commit 303a7cc58f
Author: Jaap Keuter <jaap.keuter@xs4all.nl>
Date:   Wed Jan 27 21:06:11 2021 +0000

    ZVT: Use standard TCP segment reassemble support function
    
    Fixes #17177
    
    
    (cherry picked from commit 616d44cbb651fd53273946fc04d4653aa69584fb)

commit e5478357e2
Author: Gerald Combs <gerald@wireshark.org>
Date:   Mon Jan 25 22:32:11 2021 +0000

    wiretap: Fixup the sdjournal block length in pcapng.
    
    Fix our entry length check and put our trailing '\0' in the right
    location. Fixes #17174.
    
    
    (cherry picked from commit cd278f5fd9bc77426f060170605e3ada39c6bb6a)

commit cbdee60912
Author: Grzegorz Niemirowski <grzegorz@grzegorz.net>
Date:   Mon Jan 25 21:50:37 2021 +0000

    Fix TID bitmap name
    
    
    (cherry picked from commit 6a860c979a8339088e5ae2e49ce5bc084626ccc6)

commit 24f56bec53
Author: Gerald Combs <gerald@wireshark.org>
Date:   Mon Jan 25 20:38:26 2021 +0000

    USB HID: Fix a memory leak.
    
    Replace mismatched g_strdup() + g_free()s with
    wmem_strdup_printf(wmem_packet_scope(), ...). Fixes #17124.
    
    
    (cherry picked from commit 26f0db01a7f7e6c69eee2f1c601444c64ca53e19)

commit 2248cba00c
Author: Gerald Combs <gerald@wireshark.org>
Date:   Sun Jan 24 10:30:17 2021 +0000

    [Automatic update for 2021-01-24]
    
    Update manuf, services enterprise numbers, translations, and other items.

commit 1b8d89accd
Author: Jim Young <jyoung@gsu.edu>
Date:   Sun Jan 24 04:50:36 2021 +0000

    tshark: Fix typo in comment from ascci to ascii
    
    
    (cherry picked from commit a7ad6c271fc59ed64494c5d17b37697b6034f69a)

commit edaa78ceac
Author: Enrique Giraldo <enrique.giraldo@wslw.es>
Date:   Fri Jan 22 08:37:52 2021 +0000

    tshark: Unconditionally call extcap_register_preferences
    
    extcap_register_preferences is only called with the -G option
    (to dump information) and extcap preferences are not loading,
    loading it unconditionally avoids this, as it is done in the
    GUI startup.
    
    
    (cherry picked from commit 506f1c650ff57534b58ee6391b3c537dfc307a0e)

commit c8bc83cb9e
Author: Jason Cohen <j.cohen@f5.com>
Date:   Thu Jan 21 16:37:41 2021 -0600

    f5ethtrailer: Some trailers are not detected
    
    This corrects 2 issues with the detection heuristic for f5ethtrailers
    causing trailers to be missed.
    
    Fixes #17171
    Fixes #17172
    
    (cherry picked from commit b297afee3e13d8843e462845480800bebacf6ae6)

commit 227ed8cced
Author: Jaap Keuter <jaap.keuter@xs4all.nl>
Date:   Thu Jan 21 09:40:38 2021 +0000

    FC ELS: Fix address length of FCWWN address in logout message
    
    Closes #17168
    
    
    (cherry picked from commit 13e04a21926524ed996f95a7cc350287383f1461)

commit 4ea329548c
Author: Pascal Quantin <pascal@wireshark.org>
Date:   Wed Jan 20 14:41:12 2021 +0100

    NAS 5GS: fix display of IPv6 interface identifier
    
    Do not use FT_IPV6 as an interface identifier could be wrongly identified
    as an IPv4-Compatible IPv6 Address format by inet_ntop() and displayed
    as such.
    
    (cherry picked from commit f64eddfd010248104716be3435b09c42082b5461)
    
    Conflicts:
            epan/dissectors/packet-nas_5gs.c

commit 632df36405
Author: Pascal Quantin <pascal@wireshark.org>
Date:   Wed Jan 20 13:39:09 2021 +0000

    NAS EPS: fix display of IPv6 interface identifier
    
    Do not use FT_IPV6 as an interface identifier could be wrongly identified
    as an IPv4-Compatible IPv6 Address format by inet_ntop() and displayed
    as such.
    
    
    (cherry picked from commit b794e4798a4e076e6d79d358a6fb7085e8f6427b)

commit 79b075365f
Author: Guy Harris <gharris@sonic.net>
Date:   Wed Jan 20 09:07:18 2021 +0000

    Don't dereference a known-to-be-null pointer.
    
    In dump_dfilter_macro_t(), if the dfilter_macro_t pointer is null, just
    give up after printing the message that indicates that.
    
    This should squelch several nullPointerRedundantCheck warnings from
    cppcheck.
    
    
    (cherry picked from commit 05b9e5377753cb7463294bf17f3f2cc6faec6ba4)

commit 886465a976
Author: Guy Harris <gharris@sonic.net>
Date:   Wed Jan 20 07:12:03 2021 +0000

    Squelch "Clarify calculation precedence" warning from cppcheck.
    
    For
    
            A & B ? C : D
    
    put "A & B" in parentheses, to clarify the precedence.
    
    
    (cherry picked from commit 138041b545e1191e0218142dfd6d1a15f4007f7e)

commit 3ff5fc344f
Author: Guy Harris <gharris@sonic.net>
Date:   Tue Jan 19 23:46:10 2021 +0000

    Squelch "Clarify calculation precedence" warning from cppcheck.
    
    For
    
            A & B ? C : D
    
    put "A & B" in parentheses, to clarify the precedence.
    
    
    (cherry picked from commit 6b85987e4aa9171d7a275abba7433ed05549d89a)

commit 22cc9f3f7f
Author: Guy Harris <gharris@sonic.net>
Date:   Tue Jan 19 07:31:27 2021 +0000

    dup() can fail; check whether it does.
    
    If, for example, you run out of file descriptors, dup() can fail, and
    ws_dup() is a wrapper around it on UN*X.  Don't just pass the result of
    ws_dup() to ws_fdopen(); instead, save its result, check against -1 and,
    if it's -1, give up, otherwise pass it to ws_fdopen().
    
    This addresses Coverity CID 1471708.
    
    Also, if ws_fdopen() fails, close the descriptor we got from ws_dup();
    this closes a possible FD leak.
    
    
    (cherry picked from commit 165792fb310080cd40bb891eabde97b3e6287001)

commit f8d662d787
Author: Gerald Combs <gerald@wireshark.org>
Date:   Sun Jan 17 18:38:27 2021 +0000

    Qt+tools: Fix most of our lupdate warnings.
    
    Fix various warnings with the following changes:
    
    Pass a list of include directories to lupdate. Fixes:
    
        ui/qt/proto_tree.cpp:57: Qualifying with unknown namespace/class ::ProtoTree
    
    and similar warnings.
    
    Use QT_TRANSLATE_NOOP instead of QT_TR_NOOP. Fixes:
    
        ui/qt/lte_rlc_statistics_dialog.cpp:993: tr() cannot be called without context
        ui/qt/lte_mac_statistics_dialog.cpp:911: tr() cannot be called without context
        ui/qt/font_color_preferences_frame.cpp:28: tr() cannot be called without context
        ui/qt/font_color_preferences_frame.cpp:29: tr() cannot be called without context
        ui/qt/font_color_preferences_frame.cpp:30: Discarding unconsumed meta data
    
    Add Q_OBJECT to the class definition. Fixes:
    
        ui/qt/models/filter_list_model.cpp:120: Class 'FilterListModel' lacks Q_OBJECT macro
    
    The following warnings were not fixed. This might require moving IOGraph
    to its own file:
    
        ui/qt/io_graph_dialog.cpp:320: Qualifying with unknown namespace/class ::IOGraphDialog
        ui/qt/io_graph_dialog.cpp:555: Qualifying with unknown namespace/class ::IOGraphDialog
        ui/qt/io_graph_dialog.cpp:1059: Qualifying with unknown namespace/class ::IOGraphDialog
        ui/qt/io_graph_dialog.cpp:1485: Qualifying with unknown namespace/class ::IOGraphDialog
    
    
    (cherry picked from commit 85a793892520c0f2152bc26c1287236762c69e85)

commit c297de3b27
Author: Nardi Ivan <nardi.ivan@gmail.com>
Date:   Mon Dec 14 09:35:42 2020 +0000

    QUIC: improve error reporting
    
    When unable to decrypt SH packets we should visualize an error, via
    expert info. This way we handle SH and LH errors in the same way.
    
    Close #17077
    
    
    (cherry picked from commit 9faf6d4e7b670a517ad492fe0a1c866f9ed21875)

commit 48f42d78b1
Author: Gerald Combs <gerald@wireshark.org>
Date:   Sun Jan 17 10:29:07 2021 +0000

    [Automatic update for 2021-01-17]
    
    Update manuf, services enterprise numbers, translations, and other items.

commit f4d5d56592
Author: Dr. Lars Völker <lars.voelker@technica-engineering.de>
Date:   Wed Jan 13 22:41:54 2021 +0000

    AUTOSAR-NM: True-False-String wrong way around for PNI (BUGFIX)
    
    This patch fixes the PNI TFString, which was wrong. Correct is:
    0 = "... contains no Partial Network ..."
    1 = "... contains Partial Network ..."
    
    Fixes #17154
    
    
    (cherry picked from commit 238446dc91cd39bbe56d8aea2bb0f782399f77a6)

commit 9fd813398f
Author: Pascal Quantin <pascal@wireshark.org>
Date:   Wed Jan 13 21:57:00 2021 +0000

    Windows: add a notice to NSIS in case of BSOD while installing Npcap
    
    
    (cherry picked from commit a07898a280d40735a4aa090ddc94169d99ff263c)

commit b7e7e0b37f
Author: Pascal Quantin <pascal@wireshark.org>
Date:   Wed Jan 13 22:00:16 2021 +0100

    Windows: upgrade Npcap to 1.10

commit c6c0556b3a
Author: Pascal Quantin <pascal@wireshark.org>
Date:   Wed Jan 13 21:35:21 2021 +0000

    Windows: fix USBPcap page link display in NSIS installer
    
    
    (cherry picked from commit 511aeaa44a095976944528a5e19d76205b15e198)

commit 85320d2b80
Author: Dr. Lars Völker <lars.voelker@technica-engineering.de>
Date:   Tue Jan 12 18:03:00 2021 +0000

    DoIP: Adding 2019 DoIP Type
    
    Adding ISO13400-2019 DoIP Version 3.
    
    
    (cherry picked from commit 69710ff1177179719b75904c46e0c2ee4faed292)

commit 75c00f6d0d
Author: Uli Heilmeier <uh@heilmeier.eu>
Date:   Fri Jan 1 20:09:02 2021 +0000

    SIP: Fix parsing of multiple contact-param
    
    contact-params are optional (s. https://tools.ietf.org/html/rfc3261#section-20.10).
    Therefore, independently of contact-params, we should also check for additional contact-param.
    
    Fixes: wireshark/wireshark#13752
    
    
    (cherry picked from commit 02f2d18b2ee6dbb650193689b0d4ed2d01566426)

commit a666035948
Author: John Thacker <johnthacker@gmail.com>
Date:   Tue Jan 12 00:11:52 2021 +0000

    Qt: Make the checkSaveAsWithComment dialog box appear.
    
    Set the parent of the QMessageBox in the constructor instead of calling
    QMessageBox::setParent(). The latter inherits from QDialog, and it
    "clear[s] the window flags specifying the window-system properties for
    the widget (in particular it will reset the Qt::Dialog flag)."
    (See https://doc.qt.io/qt-5/qdialog.html#details )
    This makes the dialog properly appear instead of attempting to save a file
    with comments to a file type that does not support comments silently failing.
    Fixes #17146.
    
    
    (cherry picked from commit fb422bed916efeb8e346e175db96bbb10407c7d7)

commit 0bb6c70189
Author: Gerald Combs <gerald@wireshark.org>
Date:   Sun Jan 10 10:31:22 2021 +0000

    [Automatic update for 2021-01-10]
    
    Update manuf, services enterprise numbers, translations, and other items.

commit 39f15f4d3f
Author: Eugene Adell <eugene.adell@gmail.com>
Date:   Sat Jan 9 18:07:30 2021 +0000

    Just correct the documentation for this obvious mistake. Closes #17141.
    
    
    (cherry picked from commit 9b0c3f5eaf2d91596b1c6769b7e44666a641fa07)

commit d412877409
Author: Dr. Lars Völker <lars.voelker@technica-engineering.de>
Date:   Wed Jan 6 16:42:15 2021 +0000

    TECMP: Fixing wrong size of HW version in Status CM Msg (Bugfix)
    
    The HW version is correctly parsed as 2 bytes but shown as 3 bytes in
    the dissection. This is fixed here.
    
    Fixes #17133
    
    
    (cherry picked from commit 1546a0af26d16594448e48998aa7b567b4552d8a)

commit 6f489ee857
Author: John Thacker <johnthacker@gmail.com>
Date:   Mon Jan 4 00:35:25 2021 +0000

    macos-setup: Update CMake for Apple Silicon
    
    Apple Silicon requires CMake 3.19.2, but the binaries provided
    for 3.19.2 only run on MacOS 10.10 and later, so we have more
    bifurcation of the CMake we try to install. Get rid of some of
    the old 2.x paths to compensate.
    
    
    (cherry picked from commit d74bfc569ec80ec90a07d99ca267468d3d5d0589)

commit ee43965024
Author: Stig Bjørlykke <stig@bjorlykke.org>
Date:   Sun Jan 3 13:56:43 2021 +0000

    Qt: Fetch OverlayScrollBar sliderPosition from the real ScrollBar
    
    In OverlayScrollBar return the real ScrollBar sliderPosition to ensure
    the correct value is used when handling the actionTriggered signal in
    vScrollBarActionTriggered().
    
    This improves turning on and off auto scroll during capture when page
    stepping using the packet list slider, because the value is propagated
    after this signal.
    
    
    (cherry picked from commit 7980f25f999a39ca3cebd8e6c2f8b17818774ebe)

commit c57c306762
Author: Orgad Shaneh <orgad.shaneh@audiocodes.com>
Date:   Sun Jan 3 12:48:08 2021 +0200

    TPNCP: Fix exception for commands/events without CID
    
    + Simplify length checks
    
    (cherry picked from commit 4003a5f3ce75f8cd20a6a0322fcdaa3214a4e8f8)

commit 0b17762519
Author: Gerald Combs <gerald@wireshark.org>
Date:   Sun Jan 3 10:29:33 2021 +0000

    [Automatic update for 2021-01-03]
    
    Update manuf, services enterprise numbers, translations, and other items.

commit e71ff74953
Author: Orgad Shaneh <orgads@gmail.com>
Date:   Mon Dec 7 08:38:53 2020 +0000

    TPNCP: Misc fixes for backward compatibility
    
    (cherry picked from commits d2abcb09c1232b381b538210751d351e96d43162
    and 26a822c968077076058d6245f04a56660a247d80)

commit 1d6e13c12e
Author: Orgad Shaneh <orgad.shaneh@audiocodes.com>
Date:   Sun Jan 3 08:55:17 2021 +0200

    TPNCP: Fix spelling
    
    (partially cherry picked from commit
    eef4ba7ed7dfc56745f2b5371dafa0f6df594142)

commit 417b694990
Author: Orgad Shaneh <orgad.shaneh@audiocodes.com>
Date:   Mon Nov 30 11:24:24 2020 +0200

    TPNCP: Update tpncp.dat
    
    (cherry picked from commit a97341607712eb9d567a9d5e4b09a965f2bb6e19)

commit 09d182d987
Author: Stig Bjørlykke <stig@bjorlykke.org>
Date:   Sat Jan 2 16:36:50 2021 +0000

    Qt: Connect QScrollbar::actionTriggered to OverlayScrollBar
    
    This will fix the issue where auto scroll during capture is not turned
    off when the scroll bar position is changed.
    
    
    (cherry picked from commit a42ab09b72c9f19525b63742dd5142bc81abef58)

commit f95baf9c9c
Author: Stig Bjørlykke <stig@bjorlykke.org>
Date:   Fri Jan 1 10:11:59 2021 +0000

    Happy New Year 2021
    
    
    (cherry picked from commit 85bf15fd7614cf3291b0c9d0cb682bdba5ad920b)

commit 17b2a16b5a
Author: Nardi Ivan <nardi.ivan@gmail.com>
Date:   Wed Dec 30 15:49:06 2020 +0000

    TLS: fix display of Google QUIC Version in Transport Parameters
    
    
    (cherry picked from commit a23915c9a86ae8d4b5a497b114b06d7835ed9070)

commit 4bbab577e7
Author: Jirka Novak <j.novak@netsystem.cz>
Date:   Tue Dec 29 15:52:33 2020 +0000

    voip_calls_dialog/voip_calls: Fix for #16952
    
    The fix solves issue #16952. It reverts commit 88813716 which introduced memory leak which causes the issue. The original issue with duplicating entries is solved too.
    Because commit was cherry picked to 3.4.0 (might be in more branches), this patch should be cherry picked too.
    
    
    (cherry picked from commit 71e3969d63d70e1e57b58568926534e963bd3b31)

commit 0985a2ef2a
Author: Jirka Novak <j.novak@netsystem.cz>
Date:   Sun Dec 13 13:04:11 2020 +0000

    VoIP: VoIP calls statistics are cleared when retap is issued
    
    Every press of Play Stream or Prepare Filter caused incorrect increasing
    of Packets count and added Comments.
    The reason was that callinfo statistics were not clear before recap
    therefore all new values were added to exiting ones.
    Patch solves it.
    
    
    (cherry picked from commit ff3fffcf5cc6a72ff6e37354cf5abafe0987fec0)

commit 89f62ccec2
Author: Valerii Zapodovnikov <val.zapod.vz@gmail.com>
Date:   Tue Dec 29 15:43:39 2020 +0000

    DHCPv6: typo
    
    (cherry picked from commit fbccfe99969ad47c60affadc1c06627dbde3c814)

commit b67f9a2f26
Author: Jaap Keuter <jaap.keuter@xs4all.nl>
Date:   Mon Dec 28 15:41:44 2020 +0000

    pcapng: add missing file format interpretation of EPB options
    
    Add the file format interpretations of Enhanced Packet Block options which
    are being read by wiretap, but missing from the file format dissector.
    
    
    (cherry picked from commit c657a6f5e7a8ba32a7788787b25146e0d9fa4b5f)

commit 92cea416e7
Author: Gerald Combs <gerald@wireshark.org>
Date:   Sun Dec 27 19:39:36 2020 +0000

    [Automatic update for 2020-12-27]
    
    Update manuf, services enterprise numbers, translations, and other items.

commit cbd1e0e040
Author: Guy Harris <gharris@sonic.net>
Date:   Sun Dec 27 20:55:31 2020 +0000

    dumpcap: Improve the secondary error for promiscuous mode failure.
    
    On Windows, some devices don't let promiscuous mode be enabled, and
    return an error rather than silently ignoring the request to use
    promiscuous mode (as UN*X devices tend to do).  Check for the error
    message from that error, and suggest that the user turn off promiscuous
    mode on that device.
    
    
    (cherry picked from commit c15a37db5155566cf548b8406133b3c9e43471e0)

commit c92409657d
Author: Guy Harris <gharris@sonic.net>
Date:   Thu Dec 24 07:09:19 2020 +0000

    editcap: one more integer -> Boolean.
    
    selected() returns a Boolean value indicating whether the packet with a
    given number was selected by the packet-range arguments or not.
    
    
    (cherry picked from commit f75e2e5956ffb3e26ef68813e382cc5b5afe60cb)

commit ac3579da34
Author: Guy Harris <gharris@sonic.net>
Date:   Thu Dec 24 01:55:20 2020 +0000

    editcap: make verbose a Boolean as well.
    
    And, to catch people habituated to -r and -v toggling the flag, fail if
    it's already been set, to dishabituate them.
    
    Not having them toggle makes it easier to document their semantics.
    
    
    (cherry picked from commit 0d0071a3023d19f54c02b6edaa37c20429f8da92)

commit 4ee9ca7681
Author: Guy Harris <gharris@sonic.net>
Date:   Wed Dec 23 23:49:07 2020 +0000

    editcap: treat the "keep packets" flag as a Boolean.
    
    Give it the type gboolean, initialize it to FALSE, and have -r set it to
    TRUE.
    
    This makes it a little clearer what it's doing.
    
    
    (cherry picked from commit d98106876c333bdc9a0c947aa8eaba62cd10aafc)

commit 8ea18fe50c
Author: Moshe Kaplan <me@moshekaplan.com>
Date:   Tue Dec 22 18:36:46 2020 +0000

    mate_setup: allocate correct amount of memory
    
    When creating a _mate_cfg_gog, instead of
    allocating space for a `_mate_cfg_gop`,
    allocate space for a _mate_cfg_gog. Also, use
    `g_new` instead of `gmalloc`.
    
    
    (cherry picked from commit 1c7edf49f83815b56367e6d0441445e8a4981a72)

commit 54ddb2e9f9
Author: Jaap Keuter <jaap.keuter@xs4all.nl>
Date:   Tue Dec 22 14:57:14 2020 +0000

    Let the CLI programs tell about how to show their version
    
    Add to the help text the option to show the version of the CLI program.
    
    
    (cherry picked from commit 38ab00a094e476cdb93bf1c6a1f27246b6cba179)

commit ed87507e1a
Author: Gerald Combs <gerald@wireshark.org>
Date:   Mon Dec 21 21:12:01 2020 +0000

    macOS: Force dark mode support.
    
    We initially disabled dark mode support in Info.plist when we didn't
    support it very well, and later passively enabled it depending on our
    SDK version. Go ahead and force it on since we officially support dark
    mode. Closes #17098.
    
    
    (cherry picked from commit b3352bd639ba2cffd204d6e0b63bc72d34513077)

commit 2bf67916e5
Author: Gerald Combs <gerald@wireshark.org>
Date:   Sat Dec 19 19:23:57 2020 +0000

    CMake: macOS version updates.
    
    Set MIN_MACOS_VERSION to 10.14 if we're building with Qt 6.0 or later.
    Print both our deployment target and our base SDK at configure time.
    
    
    (cherry picked from commit 2c303c725f1122fdc55c3ff8b56e75f77f43163f)

commit c3b3e09f94
Author: Dario Lombardo <lomato@gmail.com>
Date:   Tue Dec 22 10:59:00 2020 +0000

    gitlab-ci: fix build:ubuntu-dist.
    
    
    (cherry picked from commit 33ab986589684398a656e37463df71631a0710d3)

commit bab5339f3a
Author: Gerald Combs <gerald@wireshark.org>
Date:   Mon Dec 21 16:05:27 2020 -0800

    GitLab CI: Copy over the build:ubuntu-dist job from master.

commit d09878a74b
Author: Guy Harris <gharris@sonic.net>
Date:   Sun Dec 20 21:31:57 2020 +0000

    Fix the way we get high-resolution time.
    
    If we're not on Windows, use clock_gettime(CLOCK_REALTIME) *if* we have
    it; otherwise, fall back on gettimeofday().
    
    (Note: neither Linux, nor macOS, nor Windows necessarily "have"
    particular APIs; particular *versions* of Linux distributions
    (kernel+libc) have them, particular *versions* of macOS have them, and
    particular *versions* of Windows+MSVC have them.
    
    And Linux, Windows and macOS aren't the only platforms on which we run.)
    
    Fixes #17101.
    
    
    (cherry picked from commit ca99a821b4021b2367152ed6547615b098ac7c71)

commit 498192a7b4
Author: Gerald Combs <gerald@wireshark.org>
Date:   Sun Dec 20 09:25:52 2020 +0000

    [Automatic update for 2020-12-20]
    
    Update manuf, services enterprise numbers, translations, and other items.

commit f209b56885
Author: Nardi Ivan <nardi.ivan@gmail.com>
Date:   Sat Dec 19 18:33:00 2020 +0000

    GQUIC: add decoding of QLVE tag
    
    Latest GQUIC versions encapsulate their first flight in Q043 packets.
    
    
    (cherry picked from commit bfb889910af094042bd975b32a578b447bcc1e08)

commit 2fa8940607
Author: Nardi Ivan <nardi.ivan@gmail.com>
Date:   Wed Nov 18 13:55:37 2020 +0000

    QUIC: improve heurist to avoid false positives
    
    Improve visualization of "Version Negotiation" fields
    
    
    (cherry picked from commit 60401ca54efdc3e83b9e3177f3f385d6c3bd1e55)

commit e898cf7257
Author: Guy Harris <gharris@sonic.net>
Date:   Sat Dec 19 21:15:30 2020 -0800

    macos-setup: clean up snappy uninstall to match the trunk version.
    
    [skip ci]

commit 8ecb2b907f
Author: Guy Harris <gharris@sonic.net>
Date:   Thu Dec 17 02:14:30 2020 +0000

    macos-setup: various cleanups.
    
    In uninstall_autoconf, when running uninstall subfunctions, pass the
    arguments to the subfunctions.
    
    When uninstalling Ninja, remove the "we've finished installing this"
    indicator file.
    
    Get rid of a debugging "set +x".
    
    
    (cherry picked from commit 9fbf79c0453952ed48f9ed31f7004aab73c92e8e)

commit ba3e22673a
Author: Guy Harris <gharris@sonic.net>
Date:   Sat Dec 19 22:21:15 2020 +0000

    macos-setup: work around a botch in GLib "make distclean".
    
    [skip ci]
    
    
    (cherry picked from commit f3dc269df64d11763e76370c5b413dc15c11235b)

commit 7e54366ef9
Author: Guy Harris <gharris@sonic.net>
Date:   Thu Dec 17 21:21:38 2020 +0000

    macos-setup: don't configure p11-kit to use libffi.
    
    See comment for an explanation.
    
    
    (cherry picked from commit 1949b6a5eed9e2725df68b77616a6f0523058bb3)

commit 5e31174b33
Author: Guy Harris <gharris@sonic.net>
Date:   Thu Dec 17 20:43:43 2020 +0000

    macos-setup: remove tabs.
    
    Consistenly use spaces for indentation.
    
    
    (cherry picked from commit 2db0c640349643ea745b698b918f1ce561bb9551)

commit 566f03b3c3
Author: Guy Harris <gharris@sonic.net>
Date:   Thu Dec 17 07:23:13 2020 +0000

    macos-setup: get rid of a debugging "set -x".
    
    
    (cherry picked from commit ca13c3ce49d94c09a36f1696e42bd37a4412e44a)

commit 1aeaf65ea5
Author: Guy Harris <gharris@sonic.net>
Date:   Wed Dec 16 19:54:53 2020 +0000

    macos-setup: fix uninstallation of libtasn1.
    
    Fix a copy-and-pasteo.
    
    
    (cherry picked from commit f2af1ea66d195c39d8e81a80afe3332c9fcc2fd3)

commit 303ee87fd2
Author: Guy Harris <gharris@sonic.net>
Date:   Sun Dec 13 07:47:27 2020 +0000

    macos-setup: clean up uninstallation of snappy.
    
    For a CMake build done in a subdirectory of the source directory, the
    equivalent of "make distclean" is "rm -rf {that subdirectory}".  Make it
    so.
    
    When uninstalling the stuff snappy installs with "rm -rf", use $DO_RM,
    so it's done with sudo iff /usr/local isn't writable by us, just as
    "make uninstall" is done with $DO_MAKE_UNINSTALL so it's done with sudo
    iff /usr/local isn't writable by us.
    
    Fix up the list of what to remove, now that we're building snappy as a
    shared library, so that it removes shared libraries rather than the
    non-existent static library.
    
    Update a comment while we're at it, as Lua isn't the only dependency
    that doesn't support "make uninstall".
    
    
    (cherry picked from commit 7d01e3a74ec24d1e9748674bda5d109d2336dd3e)

commit dec868cb42
Author: Guy Harris <gharris@sonic.net>
Date:   Sun Dec 13 05:30:51 2020 +0000

    macos-setup: build snappy as a shared library.
    
    The older versions of snappy apparently used autotools and build a
    shared library by default; for example, Wireshark 3.2.6 for macOS is
    built with snappy, and includes a snappy dynamic library in the app
    bundle.
    
    The current version uses CMake and does *not* build a shared library by
    default.  Instead, it builds a static library, which, when you try to
    link it to a C-only shared library...
    
    ...does not work.
    
    The linker sees that you're statically linking in a bunch of C++ .o
    files and gets upset because it can't find C++ standard library routines
    used by that code.
    
    If it's a dynamic library, the library was itself already linked with
    the C++ standard library, so the external references to that library
    from the snappy library are already marked as having been resolved to
    the extent that they're expected to be in the C++ standard library at
    run time - and, when the dynamic snappy library is built, it's marked as
    depending on the C++ standard library, so the run time linker will, when
    it loads the snappy dynamic library, see that the C++ standard library
    is required and will load it if it hasn't already been loaded.
    
    
    (cherry picked from commit e92119c60895fd4586548e84ef3434bba3dbe0d8)

commit c98e80f365
Author: Guy Harris <gharris@sonic.net>
Date:   Sat Dec 12 23:51:10 2020 +0000

    Snappy uses CMake, and they didn't bother to provide an unintall target.
    
    Or a distclean target, for that matter.
    
    Do the best we can.
    
    (libpcap and tcpdump support both autotools and CMake, and Wireshark
    uses only CMake; all of them support an uninstall target in CMake.  Go
    forth, read what they did, and sin no more.)
    
    
    (cherry picked from commit 504f2ea42ab1fe6730f349860b083eabdaaaaebb)

commit 0717bf0a99
Author: Guy Harris <gharris@sonic.net>
Date:   Sat Dec 12 21:53:46 2020 +0000

    Work around more NeXTStEP-induced pain.
    
    GNU libtool has a libtool program and a libtoolize program.
    
    The development tools for NeXTStEP, apparently, had a libtool program as
    well, and the current version of the development tools for the current
    version of NeXTStEP, generally known as "Xcode for macOS", still have
    that program.
    
    This means that we do some renaming after installing GNU libtool, so
    that its "libtool" becomes "glibtool" and its "libtoolize" becomes
    "glibtoolize".
    
    That meant we had to compensate for that when running autoreconf when
    building and installing minizip.
    
    It turns out we have to do that when running autogen.sh when building
    and installing GLib as well.
    
    
    (cherry picked from commit 2ecb6061422ca933db2422e9ecb03bb0544a6492)

commit 5c1c84f415
Author: John Thacker <johnthacker@gmail.com>
Date:   Thu Nov 26 06:10:34 2020 +0000

    macOS: Enable PKCS #11 support when building with macos-setup.sh
    
    Enable PKCS #11 support in macOS builds with macos-setup.sh (already
    supported on macOS via Homebrew and on all other OSes with GnuTLS 3.4
    or greater) by installing p11-kit (and its dependency libtasn1) and
    building nettle and GnuTLS against it.
    
    
    (cherry picked from commit fe1f9475409f252b6ca2dccc71187868e168c74b)

commit 6e6b4c9e7a
Author: Jörg Mayer <jmayer@loplof.de>
Date:   Tue Dec 1 17:44:13 2020 +0100

    macos-setup.sh: Update various software versions
    
    Update versions of xz, lzip, gettext, libgpg, libgpg-error, libgcrypt, gnutls and gmp
    to newest releases.
    
    Also update glib but only to last version with autotools support - meson build is left
    for another time.
    
    Current versions of glib require a libpcre with unicode enabled which the Catalina system
    version does not provide, so install the current version of libpcre as well.
    
    Update some additional tools to commit 3a42bf0de2b9e35efcc3cea38153ab95cb71b352:
    brotli, libmaxminddb, lz4, and snappy
    
    (backported from commit 77e9d7d3f9ba64e27481710ff3effc1d5e2fbbac)
    
    These are the versions being used to build 3.4, so we're updating this
    so that the 3.4 source tree's macos-setup.sh can be used to set up the
    build environment for 3.4.
    
    [skip ci]

commit af66bef360
Author: Jaap Keuter <jaap.keuter@xs4all.nl>
Date:   Fri Dec 18 12:22:15 2020 +0000

    IPv6: SRH setup correct DA for pseudo header
    
    When a Segment Routing Header is present in the IPv6 packet provisions
    have to be made to setup the right destination address for the pseudo
    header used in checksum calculations. When segments are left in the header
    the first address in the list has to replace the destination address.
    
    Closes #17097
    
    
    (cherry picked from commit 7052994a19bd3361ea9181c6ef99a82b398033ed)

commit 3b13b3051f
Author: Dr. Lars Völker <lars.voelker@technica-engineering.de>
Date:   Wed Dec 16 23:39:23 2020 +0000

    SOME/IP-SD: hidden fields for entries are 16 bytes off (Bugfix)
    
    This patch fixes a bug that lead to 7 hidden fields being off by
    16 bytes.
    
    Closes #17091
    
    
    (cherry picked from commit ff23fb9f0cba69f3fa202bf6125fcbbc60f581f1)

commit d09e9fe0ea
Author: Guy Harris <gharris@sonic.net>
Date:   Sat Dec 19 07:53:47 2020 +0000

    macos-setup: explain why we're running autoreconf on minizip.
    
    [skip ci]
    
    
    (cherry picked from commit 8b0d19c63433ec89c84139f6fee298dc32994741)

commit f647aebf86
Author: Guy Harris <gharris@sonic.net>
Date:   Sat Dec 19 07:45:28 2020 +0000

    macos-setup: fix the name of the -done file for Minizip.
    
    It's minizip-$installed_minizip_version-done, not
    zlib-$installed_minizip_version-done; the tarball is
    zlib-$installed_minizip_version.tar.gz, because it's a contributed file
    in the zlib package, but we don't use zlib in the name of the -done
    file.
    
    [skip ci]
    
    
    (cherry picked from commit 0cdbdcc5a40f01117aa277120c97cda3c8107dfe)

commit ffb049f040
Author: Guy Harris <gharris@sonic.net>
Date:   Sat Dec 19 07:19:12 2020 +0000

    macos-setup: do "make clean", not "make distclean", for zstd.
    
    It has no configure script, so there's no need for "make distclean", and
    the Makefile supplied with it has no "make distclean" rule; just do
    "make clean".
    
    [skip ci]
    
    
    (cherry picked from commit 806f524a108280f48af58b41ee7ee9f1f4265a0d)

commit 10985f6e27
Author: Guy Harris <gharris@sonic.net>
Date:   Sat Dec 19 06:16:04 2020 +0000

    In Wireshark's version info, indicate whether we were built with Minizip.
    
    We can't determine the version number, as there's nothing in the header
    to indicate the version with which we were compiled, nor is there an API
    to determine the version with which we're running.
    
    
    (cherry picked from commit 6498bde741afdd55904fc80b692a5590471a5069)

commit 03ebce0c30
Author: Gerald Combs <gerald@wireshark.org>
Date:   Fri Dec 18 13:53:57 2020 -0800

    Version: 3.4.2 → 3.4.3.
    
    [skip ci]
